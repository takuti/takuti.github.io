<!DOCTYPE html>
<html>
  <head>
    <meta name="google-site-verification" content="LuC5G9RgHqMbCs-j6JqTMh9NjBFDlnmtliW1JOyotbQ" />
    <meta charset="utf-8">
    <meta name=keywords content="takuti,たくち" />
    <meta name=description content="" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
      
        筋トレ、登山、昨今の推薦システムのトレンドなどについて話しました | takuti.me
      
    </title>

    <link rel="stylesheet" href="https://takuti.me/style/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
    <link rel="shortcut icon" href="https://takuti.me/images/favicon.ico" />
    <link rel="alternate" type="application/atom+xml" title="takuti.me" href="https://takuti.me/index.xml" />
  </head>
  <body>
    <header class="clearfix">
      <span class="left"><a href="https://takuti.me/"><b>takuti</b>.me</a></span>
      <span class="right"><a href="https://takuti.me/about"><b>ABOUT</b></a></span>
    </header>

    <div id="container">

<article>
  <p class="meta clearfix">
    2017-11-23
  </p>
  <h2>筋トレ、登山、昨今の推薦システムのトレンドなどについて話しました</h2>

  <div class="post">
    

<p>元インターン先である<a href="http://www.silveregg.co.jp/" target="_blank">シルバーエッグ・テクノロジー</a>とのご縁があり、『<a href="http://peatix.com/event/307962" target="_blank">ビッグデータ解析のためのAI技術の最新事情とビジネスへの応用</a>』という<del>名前だけ聞くと心配になる</del>セミナーで講演の機会をいただき、昨今の推薦システムのトレンドについてお話してきました：</p>

<script async class="speakerdeck-embed" data-id="dbe350bda78f411d88e35218dceff98a" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"></script>

<ol>
<li>※ 修士研究までの僕個人の経験に基づいた内容であり、これが世の中の全てではありません。</li>
<li>※ 論文などですでに公開されている情報しか含んでいません。</li>
<li>※ 内容は、過去および現在のいかなる所属の立場を代表するものでもありません。</li>
</ol>

<p>はむかず先生が「趣味は筋トレです」と自己紹介していたので便乗したけど、ちゃんとジムに通っている先生に対して、僕は家でプッシュアップ、腹筋ローラー、チューブエクササイズ各3セットを週2〜3回やっているだけで、あとはそこにランニング（6-10km）またはプール（1時間弱）を加えている程度なので本気度が違う。</p>

<p>セミナー後には、公営のジムは（ユーザ層的な意味で）安心できる、ゴールドジムなどはガチ勢ばかりで怖いという話で盛り上がった気がする。願わくばもっとたくさん筋トレトークを聞きたかった。</p>

<p>なお、はむかず先生は糖質制限などはそんなに意識していないとのこと。僕も外ではそれほど気にせず好きなものを飲み食いしているけど、一方で、家ではお米や麺は控えて、プロテイン、ヨーグルト、納豆、豆腐、ささみ、チーズ、茹でて小分けにして冷凍した野菜各種のローテーションになっている。</p>

<p>まぁ筋トレよりも登山のほうが最近は大事で、そうなると炭水化物が命なので糖質制限とか知るかという気分になる。</p>

<p>今回のセミナー会場は大阪だったので、有給を取って前々日入りして伊吹山に登るなどした：</p>

<p><img src="https://takuti.me/images/201711/ibuki1.jpg" alt="ibuki1" /></p>

<p><img src="https://takuti.me/images/201711/ibuki2.jpg" alt="ibuki2" /></p>

<p>ちょうど登った日が初冠雪だったらしく、4合目くらいまでは鮮やかな紅葉と琵琶湖を、それ以降は今シーズン初の雪の感触を楽しんだ。平日に登る混雑していない山の素晴らしさたるや…！</p>

<p>そしてセミナー当日は早朝に京都の大文字山に登ってから大阪へ移動した：</p>

<p><img src="https://takuti.me/images/201711/daimonji.jpg" alt="daimonji" /></p>

<p><img src="https://takuti.me/images/201711/ginkaku.jpg" alt="ginkaku" /></p>

<p>紅葉シーズンの京都を独り占めできて最高だった。八坂神社のほうから入って銀閣寺側に抜けるコースで、散歩感覚で行ったら思った以上にちゃんとした登山で笑った。下山後はタイミングよく銀閣寺開店(?)凸ができてすごく良い。</p>

<p>日曜昼過ぎの開催だったセミナーには、エンジニアを中心に多くの方々の参加があった。ありがとうございました。（正直、大阪開催のミニセミナーでこんなに人が集まるとは思わなかった…。）</p>

<p>僕の話の内容は、修士研究までの経験談を土台として「推薦システムのトレンドはどこにあるのか？」という問いに答えを求めるもの。</p>

<h3 id="協調フィルタリング-matrix-factorization-レーティング予測の先にあるもの">協調フィルタリング、Matrix Factorization、レーティング予測の先にあるもの</h3>

<p>昨今の推薦システムの理論と実践のトレンドを一言で表すと &ldquo;<strong>Beyond collaborative filtering on rating</strong>&rdquo; だろう。</p>

<p>『<strong><a href="https://takuti.me/note/recsys-wordcloud">Understanding Research Trends in Recommender Systems from Word Cloud</a></strong>』で推薦システムのトップカンファレンス RecSys の直近4年分の採択論文の概要からワードクラウドを作ったが、この分野の代名詞と言っても過言でない &ldquo;Collaborative Filtering&rdquo; や &ldquo;Matrix Factorization&rdquo; という手法、そしてこれまで広く議論されてきた &ldquo;rating&rdquo; という種のデータの存在感が明らかに薄くなっていた。</p>

<p>一方で、近年目立つようになったのは &ldquo;product&rdquo; や &ldquo;review,&rdquo; &ldquo;social&rdquo; のような実アプリケーション寄りのデータを表す単語や &ldquo;online,&rdquo; &ldquo;group&rdquo; のような現実的な問題設定を示唆する単語だ <sup class="footnote-ref" id="fnref:1"><a rel="footnote" href="#fn:1">1</a></sup>。</p>

<p>アカデミアで議論されてきた手法のアプリケーション応用が進むにつれて、理論 (Theory) と実践 (Practice) のギャップというものが明るみになった。その結果が、ワードクラウドにも現れた『協調フィルタリングのその先を考える』というトレンドなのだと思う。これは『<strong><a href="https://takuti.me/note/recsys-2016/">推薦システムのトップ会議RecSys2016に参加した</a></strong>』のときに僕自身が肌で感じたことでもある。</p>

<p>Netflixが自分たちの推薦アルゴリズムの精度向上に対して多額の賞金を出した <a href="https://www.netflixprize.com/" target="_blank">Netflix Prize</a> から8年、推薦システムを取り巻く環境は大きく変わった。</p>

<p>彼ら自身、サービス形態そのものがアメリカ国内のDVDレンタルから世界規模の動画ストリーミングへと変化していく中で、システムのスケーラビリティという問題に直面した。その結果、<a href="https://www.techdirt.com/articles/20120409/03412518422/why-netflix-never-implemented-algorithm-that-won-netflix-1-million-challenge.shtml" target="_blank">今では Netflix Prize を勝ち取った手法それ自体はサービスでは使っていない</a>という。</p>

<p>実運用に耐えうるスケーラビリティとは、往々にして単一の手段では達成されない。Real-world recommender systems とは、ヒューリスティクスから深層学習まで、様々な手法を必要に応じて組み合わせて実装したハイブリッドなものなのだ。</p>

<p>ちなみに僕の場合、卒業論文（2014年）と修士論文（2016年）はいずれも情報推薦をテーマに執筆したが、前者がバッチ型のアルゴリズムであったのに対して、後者ではスケーラビリティ的な問題意識からオンライン型の推薦アルゴリズムに焦点を当てたという変化があった。</p>

<h3 id="推薦システム-機械学習であり-ヒューリスティクスも恥ではないし役に立つ">推薦システム≠機械学習であり、ヒューリスティクスも恥ではないし役に立つ</h3>

<p>『<strong><a href="https://takuti.me/note/master-graduate/">修士課程で機械学習が専門ではない指導教員の下で機械学習を学ぶために</a></strong>』で書いたような、手探りでこの分野を掘り下げてきたひよっこだからこそ話せる内容もあるのではないかと思い、経験から伝えたい3つのメッセージを用意して講演に臨んだ。</p>

<p>1つ目は「<strong>推薦システム=機械学習ではないのだ</strong>」ということ。</p>

<p>より“良い”推薦システムを作るために、機械学習の存在は必須ではない。UIで解決できる問題かもしれないし、ヒューリスティクスや non-personalized な推薦手法で十分な場合だってあるかもしれない。くれぐれも、この分野のアルゴリズム的側面だけにとらわれないことだ。そんな話は『<strong><a href="https://takuti.me/note/data-skeptic-recommender-systems">Podcast &ldquo;Data Skeptic&rdquo; の推薦システム回が良すぎて3回聞いた</a></strong>』でも言及した。</p>

<p>仮に機械学習を応用するとしても、あくまで1つのツールとして考えるべきだと思う。そのような姿勢が見て取れる<a href="https://dl.acm.org/citation.cfm?id=2806416.2806608" target="_blank">楽天のゴルフパッケージ推薦のアルゴリズム</a>は気持ちがいい。</p>

<p>このアルゴリズムは、推薦対象ユーザに対してゴルフパッケージの『コース』『値段』『オプション（キャディ/ランチの有無など）』の3要素を個別にスコアリングして、その重み付き和を「ユーザがこのパッケージをどの程度好むか」の予測値とする。そして、予測値上位N件を推薦する。</p>

<p>論文では実データの傾向をみて、解決すべき問題を定めて、可能な限りシンプルかつ解釈性の高い推薦アルゴリズムを提案している。</p>

<p>対照的に、何も考えずアルゴリズム的に魅力的な道を選択すると悲惨な結果が訪れる。</p>

<p>僕の場合、流行りの Factorization Machines という手法を思いつきで応用した結果、精度は出ないし、ハイパーパラメータが多すぎて困るし、意外と計算コスト重いし、モデルの解釈が難しいし、まぁ大変だった<sup class="footnote-ref" id="fnref:2"><a rel="footnote" href="#fn:2">2</a></sup>。そもそも手法ありきで話を始めたので、「論文を書くために精度を出す」というゴールしか設定できず、立ち止まって他の方法を考えることすら忘れていた。よくない。</p>

<p>手法ありきではじめるからこうなる。理屈だけ聞くとステキな、より複雑な手法に執着するからこうなる。</p>

<p>だからこそ、2つ目の「<strong>できるだけシンプルなシステムを、データドリブンで作るべき</strong>」というメッセージがある。</p>

<p>シンプルさの加減は難しいが、何も見えなければ一度トレンドは無視して、協調フィルタリングやロジスティック回帰のような枯れかけている手法から始めるのがよいだろう。そして non-personalized な推薦手法と比較してみるといい。</p>

<p>Amazonの &ldquo;Do the math&rdquo; というメッセージを『<strong><a href="https://takuti.me/note/the-amazon-way-on-iot">The Amazon Way on IoT - Amazonのビジネスから学ぶ、10の原則</a></strong>』で紹介したが、僕は &ldquo;Do the <strong>minimum</strong> math&rdquo; といったほうが適切であるように思う。</p>

<p>精度だけで議論すると、データによっては「Matrix Factorization よりも &ldquo;Most Popular&rdquo; （思考停止で、最も人気なアイテムをひたすら推薦する手法）のほうが高精度」という結論になりかねない。そんな悲しい結果に終わらぬよう、現場ではデータからはじまる仮説・検証のサイクルを大事にしようという話だ。</p>

<p>なお、ここで言う“現場”のデータは、自室や研究室のデスクの上、論文やGitHubで公開されている情報の中には存在しない。</p>

<p>以前、<a href="https://takuti.me/note/master-graduate">修士研究の振り返り</a>で「<strong>機械学習の応用研究は企業(で|と)やるべきだと強く思う</strong>」と書いた。これがそのまま3つ目のメッセージ。実データ、実サービスから生じた問題意識こそ本物で、深掘りする価値があるのだと思う。</p>

<h3 id="これからの推薦システム">これからの推薦システム</h3>

<p>Netflixは、画面に表示されるあらゆる情報がパーソナライズされているこの時代を &ldquo;<a href="https://www.slideshare.net/justinbasilico/past-present-future-of-recommender-systems-an-industry-perspective" target="_blank">Everything is recommendation</a>&rdquo; だと言っている。</p>

<p>&ldquo;<strong>Beyond collaborative filtering on rating</strong>&rdquo; というトレンドが示唆する通り、これからも推薦技術は様々なシーンに応用され、ますます &ldquo;Everything is recommendation&rdquo;化は進行するだろう。たとえば、業界の重鎮であるミネソタ大学のJohn Konstan先生は、<a href="https://takuti.me/note/data-skeptic-recommender-systems">教育への応用や音声インタフェースとの統合を考えている</a>。</p>

<p>そんな時代の流れに乗るためには、まず古典的な推薦手法を学び、手元で試してみよう：</p>

<ul>
<li><strong><a href="https://takuti.me/note/coursera-recommender-systems">Courseraの推薦システムのコースを修了した</a></strong></li>
<li><strong><a href="https://takuti.me/note/recommender-libraries">推薦システムのためのOSSたち</a></strong></li>
</ul>

<p>実データに応用するのなら、ここから学べる枯れた内容・手法が最良。それが僕らの目指す“シンプルさ”の目安にもなる。</p>

<p>『ビッグデータ解析のためのAI技術の最新事情とビジネスへの応用』というセミナーで枯れたシンプルな手法を薦めるというのは何か矛盾しているような気もするが、リアルはそういう泥臭い取り組みの上に成り立っている―『<strong><a href="https://takuti.me/note/rule-based-ai">ルールベースは『人工知能』か</a></strong>』でも書いたことですが、そんなことを僕は強く思うのであります。</p>

<p>全体を通してマインドセット的なお話に徹してしまい、「結局どうやって推薦システムを作っていけば良いのか」という問いへの具体的な回答は聴衆に委ねる形になってしまった。そこは反省。特に、聴衆の多くが現場のエンジニアだったことを考えると、もう少し実践的なTipsを並べるべきだった気もする。</p>

<p>しかしまぁ、個人的には大変貴重な、楽しい楽しい機会でありました。ありがとうございました。</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:1">&ldquo;Group Recommendation&rdquo; という新しい問題設定があって、<a href="https://www.youtube.com/watch?v=eHDzdz_lIYM" target="_blank">RecSys2016ではそれ専門のチュートリアルセッションがあった</a>。
 <a class="footnote-return" href="#fnref:1"><sup>[return]</sup></a></li>
<li id="fn:2">もちろん自分の実装力不足という問題もあった。
 <a class="footnote-return" href="#fnref:2"><sup>[return]</sup></a></li>
</ol>
</div>

    <br /><a href="https://twitter.com/share" class="twitter-share-button" data-via="takuti">Tweet</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  </div>

</article>
<aside class="clearfix">
  <span class="left" style="width: 10%">
    <img src="https://takuti.me/images/takuti.jpg" alt="takuti" class="icon-circle" />
  </span>
  <span class="right" style="width: 90%">
    I am <b>Takuya Kitazawa</b> (a.k.a. <b>takuti</b>), a data science engineer at <b><a href="https://www.treasuredata.com/" class="post-style" target="_blank" rel="noopener">Treasure Data, Inc.</a></b> and <b><a href="https://hivemall.incubator.apache.org/" class="post-style" target="_blank" rel="noopener">Apache Hivemall</a></b> Committer<span class="symbol">twinkle</span><a href="https://takuti.me/about">&raquo; more</a>
  </span>
</aside>

    </div>

    <footer>
      &copy; 2012-2016 Takuya Kitazawa.
    </footer>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
    <script>
      renderMathInElement(document.body,
        {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "$", right: "$", display: false},
            ]
        }
      );

      var inlineMathArray = document.querySelectorAll("script[type='math/tex']");
      for (var i = 0; i < inlineMathArray.length; i++) {
        var inlineMath = inlineMathArray[i];
        var tex = inlineMath.innerText || inlineMath.textContent;
        var replaced = document.createElement("span");
        replaced.innerHTML = katex.renderToString(tex, {displayMode: false});
        inlineMath.parentNode.replaceChild(replaced, inlineMath);
      }

      var displayMathArray = document.querySelectorAll("script[type='math/tex; mode=display']");
      for (var i = 0; i < displayMathArray.length; i++) {
        var displayMath = displayMathArray[i];
        var tex = displayMath.innerHTML;
        var replaced = document.createElement("span");
        replaced.innerHTML = katex.renderToString(tex.replace(/%.*/g, ''), {displayMode: true});
        displayMath.parentNode.replaceChild(replaced, displayMath);
      }
    </script>
    

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-28919399-2', 'auto');
      ga('send', 'pageview');

    </script>
  </body>
</html>

